!function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="/outloud/",t(0)}({0:function(e,t,n){"use strict";n(59)},59:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}n(60);var o=n(75),s=a(o);angular.module("app",["vendor",s["default"].name]).controller("RootCtrl",function(){var e=this;return e}).directive("fileread",[function(){var e=function(e){e.$apply(function(){e.fileread=""})};return{scope:{fileread:"="},link:function(t,n){n.bind("change",function(n){if(!(n&&n.target&&n.target.files&&n.target.files[0]))return e(t);var a=new FileReader;a.onload=function(e){t.$apply(function(){t.fileread=e.target.result})},a.onerror=function(e){console.warn("FileReader error:",e)},a.readAsDataURL(n.target.files[0])})}}}]).filter("unsafe",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}])},60:function(e,t){},75:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n(76),n(77);var r=n(78),l=a(r),g=n(79),c=a(g),d=function m(){m.ids||(m.ids={});var e;do e=Math.floor(Date.now()*Math.random());while(m.ids[e]);return m.ids[e]=e,e},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=e.indexOf(t);return n!==-1&&e.splice(n,1)};t["default"]=angular.module("broadcastBuilder",[]).constant("MESSAGE_TYPES",{TEXT:0,IMAGE:1,GALLERY:2}).constant("MESSAGE_ACTION_TYPES",{SEND_MESSAGE:0,GO_TO_URL:1}).service("BroadcastMessagesService",["Message",function(e){var t=[];return{getByParent:function(){return t},addMessage:function(n){if("number"!=typeof n)return!1;var a=new e(n);return t.push(a),a},removeMessage:function(e){u(t,e)}}}]).factory("Message",["MESSAGE_TYPES",function(e){function t(t){t||(t=e.TEXT);var n,a=this;return n=function(t){switch(+t){case e.TEXT:return{text:"",buttons:[]};case e.IMAGE:return{title:"",description:"",url:"",imageSrc:"",buttons:[]};case e.GALLERY:return{images:[]}}}(t),angular.extend(a,{id:d(),type:t,data:n}),a}return t}]).factory("MessageActionButton",["MESSAGE_ACTION_TYPES",function(e){function t(t){t||(t={});var n=t.type||e.SEND_MESSAGE,a=this,o={id:d(),type:n,title:"",goTourl:"",goToMessageId:0};return angular.extend(a,o,t),a}return t}]).factory("MessageImages",function(){var e=function(e){function t(){return o(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(Array);return e}).factory("MessageImageItem",function(){function e(e){e||(e={});var t=this;return angular.extend(t,{id:d(),title:"",description:"",url:"",imageSrc:"",buttons:[]},e)}return e}).directive("broadcastBuilder",function(){return{template:n(80),controller:"BroadcastBuilderCtrl as vm",restrict:"E",bindToController:!0,scope:{}}}).controller("BroadcastBuilderCtrl",["MESSAGE_TYPES","BroadcastMessagesService",function(e,t){var n=this;n.MESSAGE_TYPES=e;var a=t.getByParent();return n.id=d(),n.messages=a,n.messageTypesForSelect=[{value:e.TEXT,title:"Add text card"},{value:e.IMAGE,title:"Add image card"},{value:e.GALLERY,title:"Add gallery"}],n.onMessageTypeSelect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.addMessage(e.value)},n.sortableConfig={handle:".action-drag-move",animation:250,forceFallback:!0,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag"},n.addMessage=t.addMessage,n.getMessageType=function(e){if("undefined"==typeof e&&(e=prompt("Тип сообщения (0 | 1 | 2):")),e)return e-=0,"number"!=typeof e||isNaN(e)?void 0:e},n.startBroadcast=function(){console.warn("MESSAGES:",angular.toJson(a,!0))},n.addMessage(e.TEXT),n.addMessage(e.IMAGE),n.addMessage(e.GALLERY),n}]).component("messageText",{template:n(81),controller:"MessageTextCtrl as vm",bindings:{message:"="}}).controller("MessageTextCtrl",["$timeout","MESSAGE_TYPES","Message","MessageActionButton","BroadcastMessagesService",function(e,t,n,a,o){var s=this.message,i=s.data.buttons;this.id=d(),this.removeMessage=function(){o.removeMessage(s)},this.addButton=function(e){var t=new a(e);t._isEdit=!0,i.push(t)}}]).component("messageImage",{template:n(84),controller:"MessageImageCtrl as vm",bindings:{message:"="}}).controller("MessageImageCtrl",["MESSAGE_TYPES","Message","MessageImageItem","BroadcastMessagesService",function(e,t,n,a){var o=this,s=o.message;return o.id=d(),o.removeMessage=function(){a.removeMessage(s)},o}]).component("messageGallery",{template:n(85),controller:"MessageGalleryCtrl as vm",bindings:{message:"=",sortableConfig:"=config"}}).controller("MessageGalleryCtrl",["MESSAGE_TYPES","BroadcastMessagesService","Message","MessageImageItem","MessageActionButton",function(e,t,n,a,o){var s=this,i=s.message,r=i.data.images,l=r.splice;return r.splice=function(e,t,n){return n?l.call(r,e,t,n):(console.warn("SORTABLE STRANGE BUG!!"),!1)},r||console.warn("no images",s),s.id=d(),s.currentSlide=r[r.length-1],s.removeMessage=function(){t.removeMessage(i)},s.addButton=function(e,t){var n=new o(t);n._isEdit=!0;try{e.buttons.push(n)}catch(a){console.warn("addButton err:",a)}},s.addImage=function(){console.warn("add image");var e=new a;e.title=r.length,r.push(e)},s.removeImage=function(e){u(r,e)},s.addImage(),s}]).component("messageButton",{template:c["default"],bindings:{button:"=",array:"="},controller:["$timeout",function(e){var t=this;this.id=d(),this.removeButton=function(e){u(t.array,e)},this.saveButton=function(){t.isEdit=!1},this.button._isEdit&&e(function(){t.isEdit=!0,delete t.button._isEdit})}]}).component("addButton",{template:l["default"],bindings:{values:"=",method:"="},controller:function(){var e=this;this.id=d(),this.select=function(t){e.method(t)}}})},76:function(e,t){var n,a=window.angular;try{n=a.module(["ng"])}catch(o){n=a.module("ng",[])}var s='\n<div class="list-group">\n<button ng-repeat="type in $ctrl.values" ng-click="$ctrl.select(type);$ctrl.isOpen=!$ctrl.isOpen;" class="list-group-item">{{ type.title }}</button>\n</div>\n',i="tpl/common/popovers/valueSelect.html",r=a.element(window.document).injector();r?r.get("$templateCache").put(i,s):n.run(["$templateCache",function(e){e.put(i,s)}]),e.exports=s},77:function(e,t){var n,a=window.angular;try{n=a.module(["ng"])}catch(o){n=a.module("ng",[])}var s='<form id="btn-settings" class="settings" ng-init="button=$ctrl.button || {type:0}">\n<div class="setting-btn">\n<div class="form-group">\n<input ng-model="button.title" type="text" class="form-control" maxlength="50" placeholder="New button">\n</div>\n<ul class="nav nav-tabs nav-justified">\n<li role="presentation" ng-model="button.type" uib-btn-radio="0" class="active">\n<a href="#">Send Message</a>\n</li>\n<li role="presentation" ng-model="button.type" uib-btn-radio="1">\n<a href="#">Go to URL</a>\n</li>\n</ul>\n<div class="form-group" ng-switch="button.type">\n<div ng-switch-when="0">\n<button type="button" class="btn btn-default s-br-transparent">+ Add message\n</button>\n</div>\n<div ng-switch-when="1">\n<input ng-model="button.goToUrl" type="text" class="form-control" placeholder="url">\n</div>\n</div>\n<div class="clearfix">\n<button type="button" class="btn btn-default pull-left" ng-click="$ctrl.removeButton(button)">Remove\n</button>\n<button type="submit" class="btn btn-success pull-right" ng-click="$ctrl.saveButton(button)">Save\n</button>\n</div>\n</div>\n</form>\n',i="tpl/common/popovers/actionButtonEdit.html",r=a.element(window.document).injector();r?r.get("$templateCache").put(i,s):n.run(["$templateCache",function(e){e.put(i,s)}]),e.exports=s},78:function(e,t){var n,a=window.angular;try{n=a.module(["ng"])}catch(o){n=a.module("ng",[])}var s='<div class="btn rounded action-add" uib-popover-template="\'tpl/common/popovers/valueSelect.html\'" popover-trigger="\'click outsideClick\'" popover-append-to-body="true" popover-is-open="$ctrl.isOpen" popover-class="list">\n</div>\n',i="tpl/BroadcastBuilder/messages/addMessageButton.html",r=a.element(window.document).injector();r?r.get("$templateCache").put(i,s):n.run(["$templateCache",function(e){e.put(i,s)}]),e.exports=s},79:function(e,t){var n,a=window.angular;try{n=a.module(["ng"])}catch(o){n=a.module("ng",[])}var s='<button type="button" uib-popover-template="\'tpl/common/popovers/actionButtonEdit.html\'" popover-trigger="\'click outsideClick\'" popover-append-to-body="true" popover-is-open="$ctrl.isEdit" class="btn btn-default btn-block">\n{{ $ctrl.button.title || \'Button\' }}\n</button>\n',i="tpl/BroadcastBuilder/messages/messageButton.tpl.html",r=a.element(window.document).injector();r?r.get("$templateCache").put(i,s):n.run(["$templateCache",function(e){e.put(i,s)}]),e.exports=s},80:function(e,t){var n,a=window.angular;try{n=a.module(["ng"])}catch(o){n=a.module("ng",[])}var s='<div class="builder">\n<div class="builder-inner">\n<div ng-sortable="vm.sortableConfig">\n<div ng-repeat="message in vm.messages" message-item>\n<message-text ng-if="message.type === vm.MESSAGE_TYPES.TEXT" message="message">\n</message-text>\n<message-image ng-if="message.type === vm.MESSAGE_TYPES.IMAGE" message="message">\n</message-image>\n<message-gallery ng-if="message.type === vm.MESSAGE_TYPES.GALLERY" message="message" config="vm.sortableConfig">\n</message-gallery>\n</div>\n</div>\n<div class="add-message-button">\n<add-button values="vm.messageTypesForSelect" method="vm.onMessageTypeSelect">\n</add-button>\n</div>\n</div>\n</div>\n<div class="builder-controls l-plr-40 l-ptb-0">\n<button class="btn btn-default l-mr-25">Preview</button>\n<button class="btn btn-success" ng-click="vm.startBroadcast()">Start broadcast</button>\n</div>\n',i="tpl/app/BroadcastBuilder/broadcastBuilder.tpl.html",r=a.element(window.document).injector();r?r.get("$templateCache").put(i,s):n.run(["$templateCache",function(e){e.put(i,s)}]),e.exports=s},81:function(e,t,n){var a,o=window.angular;try{a=o.module(["ng"])}catch(s){a=o.module("ng",[])}var i='<div class="post card card-text">\n<div class="action-drag-move">\n<img src="'+n(82)+'" alt="">\n</div>\n<div class="action-remove" ng-click="vm.removeMessage()">\n<img src="'+n(83)+'" alt="">\n</div>\n<div class="form-group">\n<textarea ng-model="vm.message.data.text" name="text" class="form-control" rows="4" placeholder="Add Text" required>\n\t\t</textarea>\n</div>\n<div class="form-group">\n<div ng-repeat="button in vm.message.data.buttons">\n<message-button button="button" array="vm.message.data.buttons">\n</message-button>\n</div>\n</div>\n<button type="button" ng-click="vm.addButton()" class="btn btn-default btn-block ctrl add-btn s-brt-1">+ Add Button\n</button>\n</div>\n',r="tpl/BroadcastBuilder/messages/messageText.tpl.html",l=o.element(window.document).injector();l?l.get("$templateCache").put(r,i):a.run(["$templateCache",function(e){e.put(r,i)}]),e.exports=i},82:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjhweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgOCAyMiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDAuMSAoMzM4MDQpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPmljb25fbW92ZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJCcm9hZGNhc3QtbGluZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTU3LjAwMDAwMCwgLTE0OC4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9IkNvbnRlbnQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMzQuMDAwMDAwLCAxMDQuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iaWNvbl9tb3ZlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyOTEuMDAwMDAwLCA0NC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iU2hhcGUiIGZpbGw9IiM5OTk5OTkiIHBvaW50cz0iMyA5IDMgNCAxLjUgNS41IDAuMDggNC4wOCA0IDAuMTYgNy45MiA0LjA4IDYuNSA1LjUgNSA0IDUgOSI+PC9wb2x5Z29uPgogICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJTaGFwZSIgZmlsbD0iIzk5OTk5OSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNC4wMDAwMDAsIDE3LjU4MDAwMCkgcm90YXRlKDE4MC4wMDAwMDApIHRyYW5zbGF0ZSgtNC4wMDAwMDAsIC0xNy41ODAwMDApICIgcG9pbnRzPSIzIDIyIDMgMTcgMS41IDE4LjUgMC4wOCAxNy4wOCA0IDEzLjE2IDcuOTIgMTcuMDggNi41IDE4LjUgNSAxNyA1IDIyIj48L3BvbHlnb24+CiAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBpZD0iT3ZhbC0zIiBzdHJva2U9IiM5OTk5OTkiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0iI0YyRjRGNSIgY3g9IjQiIGN5PSIxMSIgcj0iMiI+PC9jaXJjbGU+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},83:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE0cHgiIGhlaWdodD0iMThweCIgdmlld0JveD0iMCAwIDE0IDE4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0MC4xICgzMzgwNCkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+aWNvbl9kZWxldGU8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iQnJvYWRjYXN0LWxpbmUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zODYuMDAwMDAwLCAtMTQ5LjAwMDAwMCkiIGZpbGw9IiM5OTk5OTkiPgogICAgICAgICAgICA8ZyBpZD0iQ29udGVudCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIzNC4wMDAwMDAsIDEwNC4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJUZXh0LUNhcmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI4My4wMDAwMDAsIDMzLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJpY29uX2RlbGV0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzM3LjAwMDAwMCwgMTIuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNCwxIEwxMC41LDEgTDkuNSwwIEw0LjUsMCBMMy41LDEgTDAsMSBMMCwzIEwxNCwzIEwxNCwxIFogTTEsMTYgQzEsMTcuMTA0NTY5NSAxLjg5NTQzMDUsMTggMywxOCBMMTEsMTggQzEyLjEwNDU2OTUsMTggMTMsMTcuMTA0NTY5NSAxMywxNiBMMTMsNCBMMSw0IEwxLDE2IEwxLDE2IFoiIGlkPSJTaGFwZSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},84:function(e,t,n){var a,o=window.angular;try{a=o.module(["ng"])}catch(s){a=o.module("ng",[])}var i='<div class="post card card-image">\n<div class="action-drag-move">\n<img src="'+n(82)+'" alt="">\n</div>\n<div class="action-remove" ng-click="vm.removeMessage()">\n<img src="'+n(83)+'" alt="">\n</div>\n<div class="dropzone bg-contains" ng-style="{\'background-image\':\'url(\'+vm.message.data.imageSrc+\')\'}">\n<label for="{{:: vm.id }}" class="upload-block text-center">\n<span ng-if="!vm.message.data.imageSrc">\n<i class="glyphicon glyphicon-camera"></i>\nUpload image\n</span>\n</label>\n<input id="{{:: vm.id }}" name="file-{{:: vm.id }}" type="file" fileread="vm.message.data.imageSrc">\n</div>\n</div>\n',r="tpl/BroadcastBuilder/messages/messageImage.tpl.html",l=o.element(window.document).injector();l?l.get("$templateCache").put(r,i):a.run(["$templateCache",function(e){e.put(r,i)}]),e.exports=i},85:function(e,t,n){var a,o=window.angular;try{a=o.module(["ng"])}catch(s){a=o.module("ng",[])}var i='<div class="post card card-gallery">\n<div class="action-drag-move">\n<img src="'+n(82)+'" alt="">\n</div>\n<div class="action-remove" ng-click="vm.removeMessage()">\n<img src="'+n(83)+'" alt="">\n</div>\n<div class="no-wrap">\n<div class="images-list no-wrap" ng-sortable="vm.sortableConfig">\n<div ng-repeat="image in vm.message.data.images" class="card-gallery-image">\n<div class="action-drag-move">\n<img src="'+n(82)+'" alt="">\n</div>\n<div class="action-remove" ng-click="vm.removeImage(image)">\n<img src="'+n(83)+'" alt="">\n</div>\n<div class="dropzone bg-contains" ng-style="{\'background-image\':\'url(\'+image.imageSrc+\')\'}">\n<label for="{{ image.id }}" class="upload-block text-center">\n<span ng-if="!image.imageSrc">\n<i class="glyphicon glyphicon-camera"></i>Upload\n</span> </label>\n<input id="{{ image.id }}" name="file-{{ image.id }}" type="file" fileread="image.imageSrc">\n</div>\n<div class="form-group">\n<input ng-model="image.title" type="text" name="title" class="form-control" placeholder="Heading">\n<textarea ng-model="image.description" class="form-control" name="description" rows="1" placeholder="Description">\n\t\t\t\t\t</textarea>\n<input ng-model="image.url" type="text" name="url" class="form-control" placeholder="URL">\n</div>\n<div class="form-group">\n<div ng-repeat="button in image.buttons">\n<message-button button="button" array="image.buttons">\n</message-button>\n</div>\n</div>\n<button type="button" ng-click="vm.addButton(image)" class="btn btn-default btn-block ctrl add-btn s-brt-1">+ Add Button\n</button>\n</div>\n</div>\n<div class="card-gallery-add-image s-cp" ng-click="vm.addImage()"></div>\n</div>\n</div>\n',r="tpl/BroadcastBuilder/messages/messageGallery.tpl.html",l=o.element(window.document).injector();l?l.get("$templateCache").put(r,i):a.run(["$templateCache",function(e){e.put(r,i)}]),e.exports=i}});
//# sourceMappingURL=main-4d15f026bc56f6c362d5.js.map